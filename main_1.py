import telebot
import os
from dotenv import load_dotenv
from telebot import types

load_dotenv()  # –ó–∞–≥—Ä—É–∂–∞–µ–º .env —Ñ–∞–π–ª

bot = telebot.TeleBot(os.getenv("BOT_TOKEN"))

# –ü—Ä–æ—Å—Ç–∞—è "–±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö" GPT-–∞–≥–µ–Ω—Ç–æ–≤
GPT_PRODUCTS = {
    "GPT Start": {
        "–æ–ø–∏—Å–∞–Ω–∏–µ": "–ë–∞–∑–æ–≤—ã–π –∞–≥–µ–Ω—Ç –¥–ª—è —á–∞—Ç–∞ –∏ –æ—Ç–≤–µ—Ç–æ–≤ –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã.",
        "—Ü–µ–Ω–∞": "10 —É.–µ./–º–µ—Å"
    },
    "GPT Pro": {
        "–æ–ø–∏—Å–∞–Ω–∏–µ": "–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π –∞–≥–µ–Ω—Ç —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –≤ Telegram –∏ CRM.",
        "—Ü–µ–Ω–∞": "50 —É.–µ./–º–µ—Å"
    },
    "GPT Business": {
        "–æ–ø–∏—Å–∞–Ω–∏–µ": "–ú–Ω–æ–≥–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –∞–≥–µ–Ω—Ç –¥–ª—è –±–∏–∑–Ω–µ—Å–∞, –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –∫–ª–∏–µ–Ω—Ç–æ–≤.",
        "—Ü–µ–Ω–∞": "100 —É.–µ./–º–µ—Å"
    }
}

# –ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
GPT_KEYWORDS = ["gpt", "–∞–≥–µ–Ω—Ç", "–±–æ—Ç", "assistant", "—á–∞—Ç", "–º–æ–¥–µ–ª—å", "–ø—Ä–æ–¥–∞–∂–∞", "–∫—É–ø–∏—Ç—å", "—Å—Ç–æ–∏–º–æ—Å—Ç—å", "–º–µ–Ω–µ–¥–∂–µ—Ä"]

# –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
def main_menu():
    markup = types.ReplyKeyboardMarkup(resize_keyboard=True)
    btn1 = types.KeyboardButton("üõçÔ∏è –ö–∞—Ç–∞–ª–æ–≥ GPT-–∞–≥–µ–Ω—Ç–æ–≤")
    btn2 = types.KeyboardButton("üí∞ –¶–µ–Ω—ã")
    btn3 = types.KeyboardButton("üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã")
    btn4 = types.KeyboardButton("‚ùì –ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è")
    markup.add(btn1, btn2)
    markup.add(btn3, btn4)
    return markup

# –°—Ç–∞—Ä—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
@bot.message_handler(commands=["start"])
def start(message):
    bot.send_message(
        message.chat.id,
        "–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ! üëã –Ø –º–µ–Ω–µ–¥–∂–µ—Ä –º–∞–≥–∞–∑–∏–Ω–∞ GPT‚Äôs-–∞–≥–µ–Ω—Ç–æ–≤.\n"
        "–Ø –ø–æ–º–æ–≥—É –ø–æ–¥–æ–±—Ä–∞—Ç—å –ø–æ–¥—Ö–æ–¥—è—â–µ–≥–æ –∞–≥–µ–Ω—Ç–∞ –ø–æ–¥ –≤–∞—à–∏ –∑–∞–¥–∞—á–∏.\n"
        "–í—ã–±–µ—Ä–∏—Ç–µ –∏–Ω—Ç–µ—Ä–µ—Å—É—é—â–∏–π —Ä–∞–∑–¥–µ–ª –Ω–∏–∂–µ:",
        reply_markup=main_menu()
    )

# –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–Ω–æ–ø–æ–∫ –º–µ–Ω—é
@bot.message_handler(func=lambda message: True)
def handle_menu(message):
    text = message.text.lower()

    # –ö–∞—Ç–∞–ª–æ–≥
    if "–∫–∞—Ç–∞–ª–æ–≥" in text:
        response = "üß† –î–æ—Å—Ç—É–ø–Ω—ã–µ GPT-–∞–≥–µ–Ω—Ç—ã:\n\n"
        for name, info in GPT_PRODUCTS.items():
            response += f"**{name}**\n{info['–æ–ø–∏—Å–∞–Ω–∏–µ']}\nüí∞ {info['—Ü–µ–Ω–∞']}\n\n"
        bot.send_message(message.chat.id, response, parse_mode="Markdown")

    # –¶–µ–Ω—ã
    elif "—Ü–µ–Ω—ã" in text or "—Å—Ç–æ–∏–º–æ—Å—Ç—å" in text:
        bot.send_message(
            message.chat.id,
            "üí∞ –ù–∞—à–∏ GPT-–∞–≥–µ–Ω—Ç—ã –ø–æ –ø–æ–¥–ø–∏—Å–∫–µ:\n"
            "‚Ä¢ GPT Start ‚Äî 10 —É.–µ./–º–µ—Å\n"
            "‚Ä¢ GPT Pro ‚Äî 50 —É.–µ./–º–µ—Å\n"
            "‚Ä¢ GPT Business ‚Äî 100 —É.–µ./–º–µ—Å\n"
            "\n–í—ã–±–µ—Ä–∏—Ç–µ –ø–æ–¥—Ö–æ–¥—è—â–∏–π –≤ —Ä–∞–∑–¥–µ–ª–µ '–ö–∞—Ç–∞–ª–æ–≥'."
        )

    # –ö–æ–Ω—Ç–∞–∫—Ç—ã
    elif "–∫–æ–Ω—Ç–∞–∫—Ç—ã" in text:
        bot.send_message(
            message.chat.id,
            "üìû –°–≤—è–∑–∞—Ç—å—Å—è —Å –º–µ–Ω–µ–¥–∂–µ—Ä–æ–º:\nTelegram: @gptshop_support\nEmail: support@gptshop.ai"
        )

    # –ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è
    elif "–∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è" in text:
        bot.send_message(
            message.chat.id,
            "üó£ –ù–∞–ø–∏—à–∏—Ç–µ, –¥–ª—è –∫–∞–∫–∏—Ö —Ü–µ–ª–µ–π –≤–∞–º –Ω—É–∂–µ–Ω GPT-–∞–≥–µ–Ω—Ç ‚Äî –∏ —è –ø–æ–º–æ–≥—É –ø–æ–¥–æ–±—Ä–∞—Ç—å –ª—É—á—à–∏–π –≤–∞—Ä–∏–∞–Ω—Ç!"
        )

    # –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å —Ç–µ–º—ã
    elif any(keyword in text for keyword in GPT_KEYWORDS):
        bot.send_message(
            message.chat.id,
            "–Ø —Ä–∞–¥, —á—Ç–æ –≤—ã –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç–µ—Å—å –Ω–∞—à–∏–º–∏ GPT-–∞–≥–µ–Ω—Ç–∞–º–∏! üí°\n"
            "–ú–æ–≥—É —Ä–∞—Å—Å–∫–∞–∑–∞—Ç—å –ø—Ä–æ —Ñ—É–Ω–∫—Ü–∏–∏, —Å—Ç–æ–∏–º–æ—Å—Ç—å –∏–ª–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é."
        )

    # –ï—Å–ª–∏ –≤–æ–ø—Ä–æ—Å –Ω–µ –ø–æ —Ç–µ–º–µ ‚Äî –±–æ—Ç –æ—Ç–∫–∞–∑—ã–≤–∞–µ—Ç
    else:
        bot.send_message(
            message.chat.id,
            "–ò–∑–≤–∏–Ω–∏—Ç–µ üôè, —è –∫–æ–Ω—Å—É–ª—å—Ç–∏—Ä—É—é —Ç–æ–ª—å–∫–æ –ø–æ –≤–æ–ø—Ä–æ—Å–∞–º, —Å–≤—è–∑–∞–Ω–Ω—ã–º —Å GPT-–∞–≥–µ–Ω—Ç–∞–º–∏.\n"
            "–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ –ø—É–Ω–∫—Ç –∏–∑ –º–µ–Ω—é."
        )

# –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞
bot.polling(none_stop=True, interval=0)
